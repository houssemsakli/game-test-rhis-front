<div class="game-header" style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
    <div>
        <strong>Partie</strong> #{{ gameId }}
        <span *ngIf="game"> — Blanc: {{ game.whiteUserId }} | Noir: {{ game.blackUserId }}</span>
    </div>

    <div style="display:flex;gap:12px;align-items:center">
        <div *ngIf="myTurn; else notYourTurn" class="turn-badge"
            style="padding:6px 10px;border-radius:6px;background:#dff0d8;color:#2b662b;font-weight:600">
            C'est votre tour
        </div>
        <ng-template #notYourTurn>
            <div class="turn-badge"
                style="padding:6px 10px;border-radius:6px;background:#f8d7da;color:#721c24;font-weight:600">
                En attente — tour adverse
            </div>
        </ng-template>
    </div>
</div>

<div class="board-wrapper" style="display:inline-block; border:1px solid #333; padding:6px; background:#eee">
    <div style="display:grid; grid-template-columns: 24px repeat(8,36px); gap:0; margin-bottom:4px;">
        <div></div>
        <div *ngFor="let c of columns" style="width:36px;height:18px;text-align:center;font-size:12px;">
            {{ getColumnLabel(c) }}
        </div>
    </div>

    <div *ngFor="let row of board; let r = index"
        style="display:grid; grid-template-columns: 24px repeat(8,36px); align-items:center; gap:0;">
        <div style="width:24px;height:36px;display:flex;align-items:center;justify-content:center;font-size:12px;">
            {{ 8 - r }}
        </div>

        <div *ngFor="let cell of row; let c = index" (click)="onCellClick(r, c)" [style.width.px]="36"
            [style.height.px]="36"
            style="border:1px solid #333;display:flex;align-items:center;justify-content:center;cursor:pointer;user-select:none;"
            [style.backgroundColor]="selectedCell === getCellName(r, c) ? '#f2f2aa' : ((r + c) % 2 === 0 ? '#f0d9b5' : '#b58863')"
            [style.color]="cell && cell === cell.toUpperCase() ? '#000' : '#111'"
            [style.pointerEvents]="myTurn ? 'auto' : 'none'" [style.opacity]="myTurn ? '1' : '0.85'"
            [attr.title]="getCellName(r,c)" [class.selected]="selectedCell === getCellName(r,c)">
            <span style="font-weight:600">{{ cell || '·' }}</span>
        </div>
    </div>

    <div style="display:grid; grid-template-columns: 24px repeat(8,36px); gap:0; margin-top:6px;">
        <div></div>
        <div *ngFor="let c of columns" style="width:36px;height:14px;text-align:center;font-size:12px;">
            {{ getColumnLabel(c) }}
        </div>
    </div>
</div>

<div style="margin-top:10px;font-size:13px;color:#333">
    <span style="margin-right:12px">Sélection: cliquez sur une pièce puis sur la case de destination.</span>
    <span *ngIf="!myTurn" style="color:#777">Les clics sont désactivés quand ce n'est pas votre tour.</span>
</div>